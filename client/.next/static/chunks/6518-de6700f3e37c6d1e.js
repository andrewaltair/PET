"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6518],{3842:function(e,t,a){a.d(t,{d:function(){return s},z:function(){return u}});var o=a(7821),r=a(8078),n=a(7035),i=a(898),c=a(7211);let s=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:u=!1,...l}=e,d=u?n.g7:"button";return(0,o.jsx)(d,{className:(0,c.cn)(s({variant:r,size:i,className:a})),ref:t,...l})});u.displayName="Button"},9926:function(e,t,a){a.d(t,{H:function(){return u},a:function(){return l}});var o=a(7821),r=a(8078),n=a(6963),i=a(8191),c=a(5427);let s=(0,r.createContext)(void 0);function u(e){let{children:t}=e,a=(0,i.NL)(),{data:r,isLoading:u,isError:l}=(0,c.a)({queryKey:["auth","me"],queryFn:async()=>{console.log("[AuthContext DEBUG] Starting getMe query");{let e=localStorage.getItem("auth_token");if(console.log("[AuthContext DEBUG] Token from localStorage:",e?"found":"NOT FOUND"),!e)throw console.log("[AuthContext DEBUG] No token found, throwing error"),Error("No token found");console.log("[AuthContext DEBUG] Token exists, calling authAPI.getMe()")}return await n.kv.getMe()},retry:1,refetchOnWindowFocus:!1});console.log("[AuthContext DEBUG] Query state - user:",r,"isLoading:",u,"isError:",l);let d=!!r&&!l;return console.log("[AuthContext DEBUG] isAuthenticated calculated as:",d),(0,o.jsx)(s.Provider,{value:{user:r||null,isLoading:u,isAuthenticated:d,logout:()=>{console.log("[AuthContext DEBUG] logout() called"),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),console.log("[AuthContext DEBUG] Tokens removed from localStorage"),a.invalidateQueries({queryKey:["auth","me"]}),console.log("[AuthContext DEBUG] Query cache invalidated")}},children:t})}function l(){let e=(0,r.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7211:function(e,t,a){a.d(t,{cn:function(){return n}});var o=a(2605),r=a(1638);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,o.W)(t))}},6963:function(e,t,a){a.d(t,{FZ:function(){return c},Jq:function(){return d},RW:function(){return s},hi:function(){return n},kv:function(){return i},rg:function(){return l},wQ:function(){return u}});var o=a(9190);let r="http://localhost:3001/api/v1";console.log("[CLIENT DEBUG] API_BASE_URL: ".concat(r));let n=o.Z.create({baseURL:r,timeout:1e4,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{{let t=localStorage.getItem("auth_token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,async e=>{var t;let a=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!a._retry){a._retry=!0;try{let t=localStorage.getItem("refresh_token");if(!t)return localStorage.removeItem("auth_token"),window.location.href="/login",Promise.reject(e);let{data:i}=await o.Z.post("".concat(r,"/auth/refresh"),{refreshToken:t}),{token:c,refreshToken:s}=i;return localStorage.setItem("auth_token",c),s&&localStorage.setItem("refresh_token",s),n.defaults.headers.common.Authorization="Bearer ".concat(c),a.headers.Authorization="Bearer ".concat(c),n(a)}catch(e){return console.error("Refresh token failed:",e),localStorage.removeItem("auth_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",Promise.reject(e)}}return Promise.reject(e)});let i={login:async e=>(await n.post("/auth/login",e)).data.data,register:async e=>(await n.post("/auth/register",e)).data.data,getMe:async()=>(await n.get("/auth/me")).data.data},c={getMyProfile:async()=>(await n.get("/profiles/me")).data.data,updateMyProfile:async e=>(await n.put("/profiles/me",e)).data.data,createMyProfile:async e=>(await n.post("/profiles/me",e)).data.data,getProviderProfile:async e=>(await n.get("/profiles/provider/".concat(e))).data.data},s={createService:async e=>(await n.post("/services",e)).data.data,getMyServices:async()=>(await n.get("/services/my")).data.data,updateService:async(e,t)=>(await n.put("/services/".concat(e),t)).data.data,deleteService:async e=>{await n.delete("/services/".concat(e))},getServices:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,c={page:e,limit:t};return a&&(c.search=a),o&&(c.serviceType=o),r&&(c.location=r),i&&(c.date=i),(await n.get("/services",{params:c})).data.data},getTopRatedProviders:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return(await n.get("/services/top-rated-providers",{params:{limit:e}})).data.data},getService:async e=>(await n.get("/services/".concat(e))).data.data},u={createBooking:async(e,t)=>(await n.post("/bookings/service/".concat(e),t)).data.data,getMyBookingsAsOwner:async()=>(await n.get("/bookings/my-as-owner")).data.data,getMyBookingsAsProvider:async()=>(await n.get("/bookings/my-as-provider")).data.data,updateBookingStatus:async(e,t)=>(await n.put("/bookings/".concat(e,"/status"),t)).data.data},l={createReview:async(e,t)=>(await n.post("/reviews/booking/".concat(e),t)).data.data,getServiceReviews:async e=>(await n.get("/reviews/service/".concat(e))).data.data,getProviderReviews:async e=>(await n.get("/reviews/provider/".concat(e))).data.data,canReviewBooking:async e=>(await n.get("/reviews/booking/".concat(e,"/can-review"))).data.data},d={getConversations:async()=>(await n.get("/conversations")).data.data,createConversationWithProvider:async e=>(await n.post("/conversations/provider/".concat(e))).data.data,getConversationMessages:async e=>(await n.get("/conversations/".concat(e,"/messages"))).data.data}},5068:function(e,t,a){var o=Object.create?function(e,t,a,o){void 0===o&&(o=a);var r=Object.getOwnPropertyDescriptor(t,a);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,o,r)}:function(e,t,a,o){void 0===o&&(o=a),e[o]=t[a]};Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||o(t,e,a)}(a(1505),t)},1505:function(e,t){var a,o,r,n,i,c,s,u;Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentStatus=t.BookingStatus=t.ServiceType=t.UserRole=void 0,(i=a||(t.UserRole=a={})).OWNER="OWNER",i.PROVIDER="PROVIDER",(c=o||(t.ServiceType=o={})).WALKING="WALKING",c.SITTING="SITTING",c.GROOMING="GROOMING",c.VETERINARIAN_VISIT="VETERINARIAN_VISIT",c.TAXI="TAXI",c.TRAINING="TRAINING",(s=r||(t.BookingStatus=r={})).PENDING="PENDING",s.CONFIRMED="CONFIRMED",s.CANCELLED="CANCELLED",s.COMPLETED="COMPLETED",(u=n||(t.PaymentStatus=n={})).PENDING="PENDING",u.PAID="PAID",u.FAILED="FAILED"},9008:function(e,t,a){var o=Object.create?function(e,t,a,o){void 0===o&&(o=a);var r=Object.getOwnPropertyDescriptor(t,a);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,o,r)}:function(e,t,a,o){void 0===o&&(o=a),e[o]=t[a]},r=function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||o(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(a(5068),t),r(a(6409),t),r(a(750),t)},750:function(e,t,a){var o=Object.create?function(e,t,a,o){void 0===o&&(o=a);var r=Object.getOwnPropertyDescriptor(t,a);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,o,r)}:function(e,t,a,o){void 0===o&&(o=a),e[o]=t[a]};Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||o(t,e,a)}(a(9606),t)},9606:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.updateBookingStatusSchema=t.createBookingSchema=t.updateServiceSchema=t.createServiceSchema=t.updateProfileSchema=t.createProfileSchema=t.loginSchema=t.createUserSchema=void 0;let o=a(9808),r=a(5068);t.createUserSchema=o.z.object({email:o.z.string().email("Invalid email format"),password:o.z.string().min(8,"Password must be at least 8 characters"),role:o.z.nativeEnum(r.UserRole)}),t.loginSchema=o.z.object({email:o.z.string().email("Invalid email format"),password:o.z.string().min(1,"Password is required")}),t.createProfileSchema=o.z.object({userId:o.z.string().uuid(),firstName:o.z.string().min(1).max(50).optional(),lastName:o.z.string().min(1).max(50).optional(),avatarUrl:o.z.string().url().optional(),bio:o.z.string().max(500).optional(),location:o.z.string().max(100).optional()}),t.updateProfileSchema=o.z.object({firstName:o.z.string().min(1).max(50).optional(),lastName:o.z.string().min(1).max(50).optional(),avatarUrl:o.z.string().url().optional(),bio:o.z.string().max(500).optional(),location:o.z.string().max(100).optional()}),t.createServiceSchema=o.z.object({serviceType:o.z.nativeEnum(r.ServiceType),title:o.z.string().min(5).max(100),description:o.z.string().min(10).max(1e3),price:o.z.number().positive(),availability:o.z.record(o.z.array(o.z.string().regex(/^([01]\d|2[0-3]):([0-5]\d)-([01]\d|2[0-3]):([0-5]\d)$/)))}),t.updateServiceSchema=o.z.object({serviceType:o.z.nativeEnum(r.ServiceType).optional(),title:o.z.string().min(5).max(100).optional(),description:o.z.string().min(10).max(1e3).optional(),price:o.z.number().positive().optional(),availability:o.z.record(o.z.array(o.z.string().regex(/^([01]\d|2[0-3]):([0-5]\d)-([01]\d|2[0-3]):([0-5]\d)$/))).optional()}),t.createBookingSchema=o.z.object({bookingTime:o.z.string().datetime(),notes:o.z.string().max(500).optional()}),t.updateBookingStatusSchema=o.z.object({status:o.z.nativeEnum(r.BookingStatus)})},4382:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},1460:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},6409:function(e,t,a){var o=Object.create?function(e,t,a,o){void 0===o&&(o=a);var r=Object.getOwnPropertyDescriptor(t,a);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,o,r)}:function(e,t,a,o){void 0===o&&(o=a),e[o]=t[a]},r=function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||o(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(a(8429),t),r(a(4382),t),r(a(79),t),r(a(1460),t),r(a(9589),t)},9589:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},79:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})},8429:function(e,t){Object.defineProperty(t,"__esModule",{value:!0})}}]);