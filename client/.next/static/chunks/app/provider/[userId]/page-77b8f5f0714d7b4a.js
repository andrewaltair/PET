(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4010],{1208:function(e,s,t){Promise.resolve().then(t.bind(t,3402))},3402:function(e,s,t){"use strict";t.r(s);var r=t(7821);t(8078);var a=t(4542),i=t(8504),l=t(8683),n=t(459),c=t(7740),d=t(9008),o=t(4852),u=t(3842),x=t(8006),m=t(7136),v=t(4656),h=t(6963),f=t(9926),p=t(8620),g=t(9198),N=t(5758),j=t(7419),y=t(3061);s.default=function(e){let{params:s}=e,t=(0,i.useRouter)(),{user:b,isAuthenticated:w}=(0,f.a)(),{userId:T}=s,{data:S,error:A,isPending:R}=(0,n.CE)(T),{data:E,isPending:I}=(0,c.kt)(T),O=(0,l.D)({mutationFn:e=>h.Jq.createConversationWithProvider(e),onSuccess:e=>{y.Am.success("Starting conversation..."),t.push("/dashboard/messages?conversationId=".concat(e.conversation.id))},onError:e=>{console.error("Failed to create conversation:",e),y.Am.error("Failed to start conversation. Please try again.")}}),k=e=>({[d.ServiceType.WALKING]:"Dog Walking",[d.ServiceType.SITTING]:"Pet Sitting",[d.ServiceType.GROOMING]:"Grooming",[d.ServiceType.VETERINARIAN_VISIT]:"Vet Visit",[d.ServiceType.TAXI]:"Pet Taxi",[d.ServiceType.TRAINING]:"Training"})[e]||e,D=e=>{let s=Object.keys(e);return 0===s.length?"No availability":"".concat(s.length," days available")};if(R)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)(o.T,{size:"lg"})});if(A)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-red-600 text-lg font-semibold mb-2",children:"Failed to load provider profile"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:A instanceof Error?A.message:"Unknown error occurred"}),(0,r.jsxs)("div",{className:"space-x-4",children:[(0,r.jsx)(u.z,{onClick:()=>t.back(),variant:"outline",children:"Go Back"}),(0,r.jsx)(a.default,{href:"/services",children:(0,r.jsx)(u.z,{children:"Browse Services"})})]})]})});if(!S)return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDE14"}),(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Provider not found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"The provider you're looking for doesn't exist or may have been removed."}),(0,r.jsx)(a.default,{href:"/services",children:(0,r.jsx)(u.z,{children:"Browse Services"})})]})});let{profile:P,services:C}=S;return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)(u.z,{onClick:()=>t.back(),variant:"outline",className:"flex items-center gap-2",children:[(0,r.jsx)(p.Z,{className:"w-4 h-4"}),"Back"]})}),(0,r.jsxs)(x.Zb,{className:"mb-8",children:[(0,r.jsx)(x.Ol,{children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsx)(g.Z,{className:"w-8 h-8 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(x.ll,{className:"text-2xl",children:[P.firstName," ",P.lastName]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600 mt-1",children:[(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full bg-blue-100 text-blue-800 text-xs",children:d.UserRole.PROVIDER}),P.location&&(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(N.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:P.location})]})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-500 mb-1",children:[C.length," service",1!==C.length?"s":""," offered"]}),P.overallAverageRating>0?(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(m.Z,{value:P.overallAverageRating,readonly:!0,size:"sm"}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["(",(null==E?void 0:E.length)||0," reviews)"]})]}):(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"No reviews yet"})]}),(0,r.jsxs)(u.z,{onClick:()=>{if(!w){y.Am.error("Please log in to send messages"),t.push("/login");return}if((null==b?void 0:b.role)!=="OWNER"){y.Am.error("Only pet owners can send messages to providers");return}O.mutate(T)},disabled:O.isPending,className:"flex items-center space-x-2",children:[(0,r.jsx)(j.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:O.isPending?"Starting Chat...":"Написать сообщение"})]})]})]})}),P.bio&&(0,r.jsx)(x.aY,{children:(0,r.jsxs)("div",{className:"border-t pt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"About"}),(0,r.jsx)("p",{className:"text-gray-600 leading-relaxed",children:P.bio})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["Services by ",P.firstName]}),(0,r.jsx)(a.default,{href:"/services",children:(0,r.jsx)(u.z,{variant:"outline",children:"View All Services"})})]}),0===C.length?(0,r.jsx)(x.Zb,{children:(0,r.jsx)(x.aY,{className:"py-12",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDECD️"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No services available"}),(0,r.jsx)("p",{className:"text-gray-600",children:"This provider hasn't listed any services yet."})]})})}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(e=>(0,r.jsx)(x.Zb,{className:"hover:shadow-lg transition-shadow",children:(0,r.jsxs)(x.aY,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsx)("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:k(e.serviceType)}),(0,r.jsxs)("span",{className:"text-lg font-bold text-green-600",children:["$",Number(e.price).toFixed(2)]})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:(0,r.jsx)(a.default,{href:"/services/".concat(e.id),className:"hover:text-blue-600 transition-colors",children:e.title})}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:e.description}),(0,r.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:D(e.availability)}),(0,r.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,r.jsx)(a.default,{href:"/services/".concat(e.id),children:(0,r.jsx)(u.z,{className:"w-full",children:"View Details"})})})]})},e.id))})]}),(0,r.jsx)("div",{className:"mt-12",children:(0,r.jsxs)(x.Zb,{children:[(0,r.jsx)(x.Ol,{children:(0,r.jsxs)(x.ll,{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{children:"Reviews"}),E&&E.length>0&&(0,r.jsxs)("span",{className:"text-sm font-normal text-gray-500",children:["(",E.length,")"]})]})}),(0,r.jsx)(x.aY,{children:(0,r.jsx)(v.P,{reviews:E||[],isLoading:I,emptyMessage:"No reviews yet for this provider"})})]})})]})})}},4852:function(e,s,t){"use strict";t.d(s,{T:function(){return a}});var r=t(7821);function a(e){let{size:s="md",className:t=""}=e;return(0,r.jsx)("div",{className:"flex justify-center items-center ".concat(t),children:(0,r.jsx)("div",{className:"".concat({sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[s]," border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin")})})}t(8078)},4656:function(e,s,t){"use strict";t.d(s,{P:function(){return n}});var r=t(7821);t(8078);var a=t(8006),i=t(7136),l=t(5907);function n(e){let{reviews:s,isLoading:t=!1,emptyMessage:n="No reviews yet"}=e;return t?(0,r.jsx)("div",{className:"space-y-4",children:Array.from({length:3},(e,s)=>(0,r.jsxs)(a.Zb,{className:"animate-pulse",children:[(0,r.jsx)(a.Ol,{className:"pb-3",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"w-24 h-4 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"w-16 h-3 bg-gray-200 rounded"})]})]})}),(0,r.jsx)(a.aY,{children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"w-20 h-4 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"w-full h-16 bg-gray-200 rounded"})]})})]},s))}):0===s.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-4xl mb-4",children:"⭐"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:n}),(0,r.jsx)("p",{className:"text-gray-500",children:"Be the first to leave a review!"})]}):(0,r.jsx)("div",{className:"space-y-4",children:s.map(e=>{var s,t;return(0,r.jsxs)(a.Zb,{className:"hover:shadow-md transition-shadow",children:[(0,r.jsx)(a.Ol,{className:"pb-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-blue-600 font-medium text-sm",children:[null===(s=e.owner.firstName)||void 0===s?void 0:s[0],null===(t=e.owner.lastName)||void 0===t?void 0:t[0]]})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-medium text-gray-900",children:[e.owner.firstName," ",e.owner.lastName]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:(0,l.WU)(new Date(e.createdAt),"MMM d, yyyy")})]})]}),(0,r.jsx)(i.Z,{value:e.rating,readonly:!0,size:"sm"})]})}),(0,r.jsxs)(a.aY,{children:[e.comment&&(0,r.jsx)("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:e.comment}),(0,r.jsxs)("div",{className:"mt-3 text-xs text-gray-500",children:["Service: ",e.service.title]})]})]},e.id)})})}},8006:function(e,s,t){"use strict";t.d(s,{Ol:function(){return n},SZ:function(){return d},Zb:function(){return l},aY:function(){return o},eW:function(){return u},ll:function(){return c}});var r=t(7821),a=t(8078),i=t(7211);let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...a})});l.displayName="Card";let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...a})});n.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("font-semibold leading-none tracking-tight",t),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",t),...a})});o.displayName="CardContent";let u=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},7136:function(e,s,t){"use strict";t.d(s,{Z:function(){return x}});var r=t(7821),a=t(8078),i=t(7746),l=t(2296),n=t(2819),c=t(7211);let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.fC,{className:(0,c.cn)("grid gap-2",t),...a,ref:s})});d.displayName=l.fC.displayName;let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.ck,{ref:s,className:(0,c.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,r.jsx)(l.z$,{className:"flex items-center justify-center",children:(0,r.jsx)(n.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});o.displayName=l.ck.displayName;let u={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};function x(e){let{value:s=0,onValueChange:t,maxStars:l=5,size:n="md",readonly:x=!1,className:m}=e,[v,h]=a.useState(null),f=null!=v?v:s;return x?(0,r.jsxs)("div",{className:(0,c.cn)("flex items-center space-x-1",m),role:"img","aria-label":"Rating: ".concat(s.toFixed(1)," out of ").concat(l," stars"),children:[Array.from({length:l},(e,s)=>{let t=s+1<=f;return(0,r.jsx)(i.Z,{className:(0,c.cn)(u[n],t?"fill-yellow-400 text-yellow-400":"text-gray-300"),"aria-hidden":"true"},s)}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-600","aria-hidden":"true",children:s.toFixed(1)})]}):(0,r.jsxs)("fieldset",{className:(0,c.cn)("flex items-center space-x-1",m),children:[(0,r.jsxs)("legend",{className:"sr-only",children:["Rate this item out of ",l," stars"]}),(0,r.jsxs)(d,{value:s.toString(),onValueChange:e=>null==t?void 0:t(parseInt(e)),className:"flex items-center space-x-1",children:[Array.from({length:l},(e,s)=>{let t=s+1,a=t<=f;return(0,r.jsxs)("div",{className:"relative",onMouseEnter:()=>h(t),onMouseLeave:()=>h(null),children:[(0,r.jsx)(o,{value:t.toString(),id:"star-".concat(t),className:"sr-only","aria-describedby":"star-".concat(t,"-description")}),(0,r.jsx)("label",{htmlFor:"star-".concat(t),className:"cursor-pointer block",children:(0,r.jsx)(i.Z,{className:(0,c.cn)(u[n],"transition-colors",a?"fill-yellow-400 text-yellow-400":"text-gray-300 hover:text-yellow-400"),"aria-hidden":"true"})}),(0,r.jsxs)("span",{id:"star-".concat(t,"-description"),className:"sr-only",children:[t," star",1!==t?"s":""]})]},s)}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-600 min-w-[2rem]","aria-live":"polite","aria-atomic":"true",children:f>0?f:""})]})]})}},7790:function(e,s,t){"use strict";t.d(s,{Am:function(){return u},pm:function(){return x}});var r=t(8078);let a=0,i=new Map,l=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,s)},n=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?l(t):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},c=[],d={toasts:[]};function o(e){d=n(d,e),c.forEach(e=>{e(d)})}function u(e){let{...s}=e,t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function x(){let[e,s]=r.useState(d);return r.useEffect(()=>(c.push(s),()=>{let e=c.indexOf(s);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},459:function(e,s,t){"use strict";t.d(s,{CE:function(){return d},Em:function(){return c},_l:function(){return n}});var r=t(5178),a=t(5427),i=t(6963);let l={all:["public-services"],lists:()=>[...l.all,"list"],list:e=>[...l.lists(),e]};function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,s=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;return(0,r.N)({queryKey:l.list({limit:e,search:s,serviceType:t,location:a,date:n}),queryFn:r=>{let{pageParam:l=1}=r;return i.RW.getServices(l,e,s,t,a,n)},initialPageParam:1,getNextPageParam:e=>{let{pagination:s}=e;return s.page<s.totalPages?s.page+1:void 0},staleTime:3e5,gcTime:6e5,retry:(e,s)=>{var t,r;return(!((null==s?void 0:null===(t=s.response)||void 0===t?void 0:t.status)>=400)||!((null==s?void 0:null===(r=s.response)||void 0===r?void 0:r.status)<500))&&e<3},enabled:!0})}function c(e){var s,t;let{data:r,isLoading:a,error:i,hasNextPage:l,fetchNextPage:n,isFetchingNextPage:c}=e,d=null!==(s=null==r?void 0:r.pages.flatMap(e=>e.data))&&void 0!==s?s:[],o=d.length,u=null==r?void 0:r.pages[r.pages.length-1];return{services:d,totalLoaded:o,totalAvailable:null!==(t=null==u?void 0:u.pagination.total)&&void 0!==t?t:0,hasMore:l,loadMore:n,isLoadingMore:c,isLoading:a,error:i}}function d(e){return(0,a.a)({queryKey:["provider-profile",e],queryFn:()=>i.FZ.getProviderProfile(e),staleTime:6e5,retry:(e,s)=>{var t,r;return(!((null==s?void 0:null===(t=s.response)||void 0===t?void 0:t.status)>=400)||!((null==s?void 0:null===(r=s.response)||void 0===r?void 0:r.status)<500))&&e<3},enabled:!!e})}},7740:function(e,s,t){"use strict";t.d(s,{ZU:function(){return x},Zs:function(){return d},kt:function(){return o},rr:function(){return u}});var r=t(5427),a=t(8191),i=t(8683),l=t(6963),n=t(7790);let c={all:["reviews"],service:e=>[...c.all,"service",e],provider:e=>[...c.all,"provider",e],canReview:e=>[...c.all,"can-review",e]};function d(e){return(0,r.a)({queryKey:c.service(e),queryFn:()=>l.rg.getServiceReviews(e),staleTime:3e5,enabled:!!e})}function o(e){return(0,r.a)({queryKey:c.provider(e),queryFn:()=>l.rg.getProviderReviews(e),staleTime:3e5,enabled:!!e})}function u(e){return(0,r.a)({queryKey:c.canReview(e),queryFn:()=>l.rg.canReviewBooking(e),staleTime:6e4,enabled:!!e})}function x(){let e=(0,a.NL)();return(0,i.D)({mutationFn:e=>{let{bookingId:s,reviewData:t}=e;return l.rg.createReview(s,t)},onSuccess:(s,t)=>{e.invalidateQueries({queryKey:c.service(s.serviceId)}),e.invalidateQueries({queryKey:c.provider(s.providerId)}),e.invalidateQueries({queryKey:c.canReview(t.bookingId)}),e.invalidateQueries({queryKey:["services"]}),e.invalidateQueries({queryKey:["profile"]}),(0,n.Am)({title:"Review submitted",description:"Thank you for your feedback!"})},onError:e=>{var s,t;let r=(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.error)||"Failed to submit review";(0,n.Am)({title:"Error",description:r,variant:"destructive"})}})}}},function(e){e.O(0,[8803,5427,9808,4542,4685,60,5593,3061,8720,6518,7115,2364,1744],function(){return e(e.s=1208)}),_N_E=e.O()}]);