(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5382],{3996:function(e,t,s){Promise.resolve().then(s.bind(s,6089))},6089:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var r=s(7821),a=s(8078),i=s(4542),l=s(8504),n=s(9926),d=s(1458),o=s(9008),c=s(6066),u=s(6607);function m(e){let{className:t}=e;return(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden animate-pulse hover:shadow-lg transition-shadow ".concat(t),children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsx)(u.O,{className:"h-5 w-20 rounded-full"}),(0,r.jsx)(u.O,{className:"h-6 w-16"})]}),(0,r.jsx)(u.O,{className:"h-6 w-3/4 mb-2"}),(0,r.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,r.jsx)(u.O,{className:"h-4 w-full"}),(0,r.jsx)(u.O,{className:"h-4 w-5/6"}),(0,r.jsx)(u.O,{className:"h-4 w-4/6"})]}),(0,r.jsx)(u.O,{className:"h-4 w-40 mb-4"}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 gap-2",children:[(0,r.jsx)(u.O,{className:"h-8 w-20 rounded-md"}),(0,r.jsx)(u.O,{className:"h-8 w-24 rounded-md"})]})]})})}var x=s(3842),h=s(4977),v=s(2806),f=s(2021),g=s(9044);function p(){let{user:e}=(0,n.a)(),t=(0,l.useRouter)(),{data:s,isPending:c,error:u}=(0,d.v_)(),p=(0,d.$_)(),[b,N]=(0,a.useState)({open:!1,serviceId:"",serviceTitle:""}),j=(e,t)=>{N({open:!0,serviceId:e,serviceTitle:t})},y=async()=>{try{await p.mutateAsync(b.serviceId),N({open:!1,serviceId:"",serviceTitle:""})}catch(e){}},w=e=>{t.push("/dashboard/services/edit/".concat(e))},S=e=>({[o.ServiceType.WALKING]:"Dog Walking",[o.ServiceType.SITTING]:"Pet Sitting",[o.ServiceType.GROOMING]:"Grooming",[o.ServiceType.VETERINARIAN_VISIT]:"Vet Visit",[o.ServiceType.TAXI]:"Pet Taxi",[o.ServiceType.TRAINING]:"Training"})[e]||e,T=e=>{let t=Object.keys(e);if(0===t.length)return"No availability set";let s=e[t[0]];return"".concat(t.length," days available, ").concat(s.length," time slots")};return(null==e?void 0:e.role)!==o.UserRole.PROVIDER?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDEAB"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Only service providers can manage services."}),(0,r.jsx)(x.z,{asChild:!0,className:"hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700 transition-all duration-200 shadow-sm hover:shadow-md",children:(0,r.jsx)(i.default,{href:"/dashboard",children:"Back to Dashboard"})})]})}):c?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"h-8 bg-gray-300 rounded w-36 mb-2 animate-pulse"}),(0,r.jsx)("div",{className:"h-4 bg-gray-300 rounded w-56 animate-pulse"})]}),(0,r.jsx)("div",{className:"h-10 bg-gray-300 rounded w-40 animate-pulse"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:Array.from({length:6}).map((e,t)=>(0,r.jsx)(m,{},t))})]})}):u?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-red-600 text-lg font-semibold mb-2",children:"Failed to load services"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:u instanceof Error?u.message:"Unknown error occurred"}),(0,r.jsx)(x.z,{asChild:!0,variant:"outline",className:"hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700 transition-all duration-200 shadow-sm hover:shadow-md",children:(0,r.jsx)(i.default,{href:"/dashboard",children:"Back to Dashboard"})})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(v.aG,{children:(0,r.jsxs)(v.Jb,{children:[(0,r.jsx)(v.gN,{children:(0,r.jsx)(v.At,{href:"/",children:"Home"})}),(0,r.jsx)(v.bg,{}),(0,r.jsx)(v.gN,{children:(0,r.jsx)(v.At,{href:"/dashboard",children:"Dashboard"})}),(0,r.jsx)(v.bg,{}),(0,r.jsx)(v.gN,{children:(0,r.jsx)(v.AG,{children:"My Services"})})]})})}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{onClick:()=>t.push("/dashboard"),className:"text-blue-600 hover:text-blue-800 mb-4 inline-block",children:"← Back to Dashboard"}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Services"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your pet service offerings"})]}),(0,r.jsx)(x.z,{asChild:!0,className:"shadow-md hover:shadow-lg transform hover:scale-[1.02] transition-all duration-200 font-semibold",children:(0,r.jsx)(i.default,{href:"/dashboard/services/new",children:"+ Add New Service"})})]}),s&&0!==s.length?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsx)("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:S(e.serviceType)}),(0,r.jsxs)("span",{className:"text-lg font-bold text-green-600",children:["$",Number(e.price).toFixed(2)]})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.title}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:e.description}),(0,r.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:T(e.availability)}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 gap-2",children:[(0,r.jsxs)(x.z,{onClick:()=>w(e.id),variant:"outline",size:"sm",disabled:p.isPending,className:"hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700 transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,r.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,r.jsxs)(x.z,{onClick:()=>j(e.id,e.title),variant:"destructive",size:"sm",disabled:p.isPending,className:"shadow-sm hover:shadow-md transform hover:scale-[1.02] transition-all duration-200 font-semibold",children:[(0,r.jsx)(g.Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})},e.id))}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDFE2"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No services yet"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Create your first service to start offering pet care services."}),(0,r.jsx)(x.z,{asChild:!0,className:"shadow-md hover:shadow-lg transform hover:scale-[1.02] transition-all duration-200 font-semibold",children:(0,r.jsx)(i.default,{href:"/dashboard/services/new",children:"Create Your First Service"})})]}),s&&s.length>0&&(0,r.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-md p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Service Summary"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:s.length}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Total Services"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",s.reduce((e,t)=>e+Number(t.price),0).toFixed(2)]}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Total Value"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:new Set(s.map(e=>e.serviceType)).size}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Service Types"})]})]})]}),(0,r.jsx)(h.U,{open:b.open,onOpenChange:e=>N(t=>({...t,open:e})),title:"Delete Service",description:'Are you sure you want to delete "'.concat(b.serviceTitle,'"? This action cannot be undone.'),confirmText:"Delete",onConfirm:y,variant:"destructive"})]})})}function b(){return(0,r.jsx)(c.i,{children:(0,r.jsx)(p,{})})}},6066:function(e,t,s){"use strict";s.d(t,{i:function(){return l}});var r=s(7821),a=s(8078),i=s(9926);function l(e){let{children:t}=e,{isAuthenticated:s,isLoading:l}=(0,i.a)();return(console.log("[ProtectedRoute DEBUG] Render - isAuthenticated:",s,"isLoading:",l),(0,a.useEffect)(()=>{console.log("[ProtectedRoute DEBUG] useEffect triggered - isLoading:",l,"isAuthenticated:",s),l||s?!l&&s&&console.log("[ProtectedRoute DEBUG] User is authenticated, allowing access"):(console.log("[ProtectedRoute DEBUG] Not authenticated, redirecting to /login"),window.location.href="/login")},[s,l]),l)?(console.log("[ProtectedRoute DEBUG] Still loading, showing loading spinner"),(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})})):s?(console.log("[ProtectedRoute DEBUG] Rendering protected content"),(0,r.jsx)(r.Fragment,{children:t})):(console.log("[ProtectedRoute DEBUG] Not authenticated, returning null"),null)}},2806:function(e,t,s){"use strict";s.d(t,{AG:function(){return x},At:function(){return m},Jb:function(){return c},aG:function(){return o},bg:function(){return h},gN:function(){return u}});var r=s(7821),a=s(8078),i=s(2625),l=s(898),n=s(7211);let d=(0,l.j)("flex items-center gap-1.5",{variants:{variant:{default:"",ghost:"text-muted-foreground hover:text-foreground"}},defaultVariants:{variant:"default"}}),o=a.forwardRef((e,t)=>{let{className:s,variant:a,separator:l=i.Z,...o}=e;return(0,r.jsx)("nav",{ref:t,"aria-label":"breadcrumb",className:(0,n.cn)(d({variant:a}),s),...o})});o.displayName="Breadcrumb";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("ol",{ref:t,className:(0,n.cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",s),...a})});c.displayName="BreadcrumbList";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("li",{ref:t,className:(0,n.cn)("inline-flex items-center gap-1.5",s),...a})});u.displayName="BreadcrumbItem";let m=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("a",{ref:t,className:(0,n.cn)("transition-colors hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});m.displayName="BreadcrumbLink";let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("span",{ref:t,role:"link","aria-disabled":"true","aria-current":"page",className:(0,n.cn)("font-normal text-foreground",s),...a})});x.displayName="BreadcrumbPage";let h=e=>{let{children:t,className:s,...a}=e;return(0,r.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,n.cn)("[&>svg]:h-3.5 [&>svg]:w-3.5",s),...a,children:null!=t?t:(0,r.jsx)(i.Z,{})})};h.displayName="BreadcrumbSeparator"},4977:function(e,t,s){"use strict";s.d(t,{U:function(){return p}});var r=s(7821),a=s(8078),i=s(4447),l=s(7211),n=s(3842);let d=i.fC;i.xz;let o=i.h_,c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t})});c.displayName=i.aV.displayName;let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsxs)(o,{children:[(0,r.jsx)(c,{}),(0,r.jsx)(i.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a})]})});u.displayName=i.VY.displayName;let m=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};m.displayName="AlertDialogHeader";let x=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};x.displayName="AlertDialogFooter";let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold",s),...a})});h.displayName=i.Dx.displayName;let v=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...a})});v.displayName=i.dk.displayName;let f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.aU,{ref:t,className:(0,l.cn)((0,n.d)(),s),...a})});f.displayName=i.aU.displayName;let g=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.$j,{ref:t,className:(0,l.cn)((0,n.d)({variant:"outline"}),"mt-2 sm:mt-0",s),...a})});function p(e){let{open:t,onOpenChange:s,title:a,description:i,confirmText:l="Confirm",cancelText:n="Cancel",onConfirm:o,onCancel:c,variant:p="default"}=e;return(0,r.jsx)(d,{open:t,onOpenChange:s,children:(0,r.jsxs)(u,{children:[(0,r.jsxs)(m,{children:[(0,r.jsx)(h,{children:a}),(0,r.jsx)(v,{children:i})]}),(0,r.jsxs)(x,{children:[(0,r.jsx)(g,{onClick:()=>{null==c||c(),s(!1)},children:n}),(0,r.jsx)(f,{onClick:()=>{o(),s(!1)},className:"destructive"===p?"bg-destructive text-destructive-foreground hover:bg-destructive/90":"",children:l})]})]})})}g.displayName=i.$j.displayName},6607:function(e,t,s){"use strict";s.d(t,{O:function(){return i}});var r=s(7821),a=s(7211);function i(e){let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-primary/10",t),...s})}},7790:function(e,t,s){"use strict";s.d(t,{Am:function(){return u},pm:function(){return m}});var r=s(8078);let a=0,i=new Map,l=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],o={toasts:[]};function c(e){o=n(o,e),d.forEach(e=>{e(o)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(o);return r.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},1458:function(e,t,s){"use strict";s.d(t,{$_:function(){return m},G2:function(){return x},LR:function(){return u},bu:function(){return c},v_:function(){return o}});var r=s(5427),a=s(8191),i=s(8683),l=s(6963),n=s(7790);let d={all:["services"],lists:()=>[...d.all,"list"],list:e=>[...d.lists(),e],myServices:()=>[...d.all,"my"],details:()=>[...d.all,"detail"],detail:e=>[...d.details(),e]};function o(){return(0,r.a)({queryKey:d.myServices(),queryFn:l.RW.getMyServices,staleTime:12e4,retry:(e,t)=>{var s,r;return(null==t?void 0:null===(s=t.response)||void 0===s?void 0:s.status)!==401&&(null==t?void 0:null===(r=t.response)||void 0===r?void 0:r.status)!==403&&e<3}})}function c(){let e=(0,a.NL)();return(0,i.D)({mutationFn:e=>l.RW.createService(e),onSuccess:t=>{e.invalidateQueries({queryKey:d.myServices()}),e.invalidateQueries({queryKey:d.lists()}),(0,n.Am)({title:"Success",description:"Service created successfully"})},onError:e=>{var t,s;let r=(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||"Failed to create service";(0,n.Am)({title:"Error",description:r,variant:"destructive"})}})}function u(){let e=(0,a.NL)();return(0,i.D)({mutationFn:e=>{let{serviceId:t,serviceData:s}=e;return l.RW.updateService(t,s)},onSuccess:(t,s)=>{let{serviceId:r}=s;e.setQueryData(d.myServices(),e=>e?e.map(e=>e.id===r?t:e):e),e.setQueryData(d.detail(r),t),e.invalidateQueries({queryKey:d.lists()}),(0,n.Am)({title:"Success",description:"Service updated successfully"})},onError:e=>{var t,s;let r=(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||"Failed to update service";(0,n.Am)({title:"Error",description:r,variant:"destructive"})}})}function m(){let e=(0,a.NL)();return(0,i.D)({mutationFn:e=>l.RW.deleteService(e),onSuccess:(t,s)=>{e.setQueryData(d.myServices(),e=>e?e.filter(e=>e.id!==s):e),e.removeQueries({queryKey:d.detail(s)}),e.invalidateQueries({queryKey:d.lists()}),(0,n.Am)({title:"Success",description:"Service deleted successfully"})},onError:e=>{var t,s;let r=(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||"Failed to delete service";(0,n.Am)({title:"Error",description:r,variant:"destructive"})}})}function x(e){return(0,r.a)({queryKey:d.detail(e),queryFn:()=>l.RW.getService(e),enabled:!!e,staleTime:3e5,retry:(e,t)=>{var s;return(null==t?void 0:null===(s=t.response)||void 0===s?void 0:s.status)!==404&&e<3}})}}},function(e){e.O(0,[8803,5427,9808,6074,4542,9033,5367,4201,6518,7115,2364,1744],function(){return e(e.s=3996)}),_N_E=e.O()}]);