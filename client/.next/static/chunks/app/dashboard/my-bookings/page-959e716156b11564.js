(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6954],{6893:function(e,s,t){Promise.resolve().then(t.bind(t,4466))},4466:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return w}});var n=t(7821),r=t(8078),i=t(4542),a=t(8504),l=t(9926),c=t(9478),o=t(7740),d=t(9008),u=t(6066),x=t(6350),m=t(3671),h=t(8683),g=t(3759),v=t(3842),j=t(3507),f=t(7136),p=t(7790),b=t(6963);function y(e){let{bookingId:s,serviceTitle:t,isOpen:i,onClose:a,onSuccess:l}=e,[c,o]=(0,r.useState)(0),[d,u]=(0,r.useState)(""),{toast:x}=(0,p.pm)(),m=(0,h.D)({mutationFn:e=>b.rg.createReview(s,{...e,bookingId:s}),onSuccess:()=>{x({title:"Review submitted",description:"Thank you for your feedback!"}),l(),y()},onError:e=>{var s,t;x({title:"Failed to submit review",description:(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.error)||"Something went wrong",variant:"destructive"})}}),y=()=>{o(0),u(""),a()};return(0,n.jsx)(g.Vq,{open:i,onOpenChange:y,children:(0,n.jsxs)(g.cZ,{className:"sm:max-w-[425px]",children:[(0,n.jsxs)(g.fK,{children:[(0,n.jsx)(g.$N,{children:"Leave a Review"}),(0,n.jsxs)(g.Be,{children:['Share your experience with "',t,'"']})]}),(0,n.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),0===c){x({title:"Rating required",description:"Please select a star rating",variant:"destructive"});return}m.mutate({rating:c,comment:d.trim()})},className:"space-y-6",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("label",{className:"text-sm font-medium",children:["Rating ",(0,n.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,n.jsx)(f.Z,{value:c,onValueChange:o,size:"lg"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{htmlFor:"comment",className:"text-sm font-medium",children:"Comment (optional)"}),(0,n.jsx)(j.g,{id:"comment",placeholder:"Tell others about your experience...",value:d,onChange:e=>u(e.target.value),rows:4,className:"resize-none"}),(0,n.jsxs)("p",{className:"text-xs text-gray-500",children:[d.length,"/500 characters"]})]}),(0,n.jsxs)(g.cN,{children:[(0,n.jsx)(v.z,{type:"button",variant:"outline",onClick:y,disabled:m.isPending,children:"Cancel"}),(0,n.jsx)(v.z,{type:"submit",disabled:m.isPending||0===c,children:m.isPending?"Submitting...":"Submit Review"})]})]})]})})}var N=t(2806);function k(){let{user:e}=(0,l.a)(),s=(0,a.useRouter)(),{data:t,isLoading:u,error:h}=(0,c.dA)(),g=(0,c.Lt)();(0,o.ZU)();let[j,f]=(0,r.useState)(null),[p,b]=(0,r.useState)(!1),k=(e,s)=>{s===d.BookingStatus.CANCELLED&&g.mutate(e)},w=(e,s)=>{f({id:e,serviceTitle:s}),b(!0)};if((null==e?void 0:e.role)!==d.UserRole.OWNER)return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDEAB"}),(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),(0,n.jsx)("p",{className:"text-gray-600 mb-6",children:"Only pet owners can view their bookings."}),(0,n.jsx)(i.default,{href:"/dashboard",children:(0,n.jsx)(v.z,{variant:"outline",children:"Back to Dashboard"})})]})});if(u)return(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,n.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("div",{className:"h-8 bg-gray-300 rounded w-48 mb-2 animate-pulse"}),(0,n.jsx)("div",{className:"h-4 bg-gray-300 rounded w-64 animate-pulse"})]}),(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"h-6 bg-gray-300 rounded w-40 mb-4 animate-pulse"}),(0,n.jsx)("div",{className:"space-y-6",children:Array.from({length:2}).map((e,s)=>(0,n.jsx)(m.u,{},"pending-".concat(s)))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"h-6 bg-gray-300 rounded w-44 mb-4 animate-pulse"}),(0,n.jsx)("div",{className:"space-y-6",children:Array.from({length:1}).map((e,s)=>(0,n.jsx)(m.u,{},"confirmed-".concat(s)))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"h-6 bg-gray-300 rounded w-40 mb-4 animate-pulse"}),(0,n.jsx)("div",{className:"space-y-6",children:Array.from({length:2}).map((e,s)=>(0,n.jsx)(m.u,{},"completed-".concat(s)))})]})]})]})});if(h)return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-red-600 text-lg font-semibold mb-2",children:"Failed to load bookings"}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:h instanceof Error?h.message:"Unknown error occurred"}),(0,n.jsx)(i.default,{href:"/dashboard",children:(0,n.jsx)(v.z,{variant:"outline",children:"Back to Dashboard"})})]})});let C=(null==t?void 0:t.bookings)||[],D=C.filter(e=>e.status===d.BookingStatus.PENDING),A=C.filter(e=>e.status===d.BookingStatus.CONFIRMED),R=C.filter(e=>e.status===d.BookingStatus.COMPLETED),S=C.filter(e=>e.status===d.BookingStatus.CANCELLED),E=e=>{let{title:s,bookings:t,emptyMessage:r}=e;return(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:[s," (",t.length,")"]}),0===t.length?(0,n.jsx)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:(0,n.jsx)("p",{className:"text-gray-600",children:r})}):(0,n.jsx)("div",{className:"space-y-6",children:t.map(e=>(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(x.L,{booking:e,userRole:d.UserRole.OWNER,onStatusUpdate:k,isUpdating:g.isPending}),e.status===d.BookingStatus.COMPLETED&&(0,n.jsx)("div",{className:"mt-3 flex justify-end",children:(0,n.jsx)(B,{bookingId:e.id,serviceTitle:e.service.title,onClick:()=>w(e.id,e.service.title)})})]},e.id))})]})},B=e=>{var s;let{bookingId:t,serviceTitle:r,onClick:i}=e,{data:a}=(0,o.rr)(t);return null!==(s=null==a?void 0:a.canReview)&&void 0!==s&&s?(0,n.jsx)(v.z,{onClick:i,variant:"outline",size:"sm",className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:"Leave Review"}):null};return(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,n.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)(N.aG,{children:(0,n.jsxs)(N.Jb,{children:[(0,n.jsx)(N.gN,{children:(0,n.jsx)(N.At,{href:"/",children:"Home"})}),(0,n.jsx)(N.bg,{}),(0,n.jsx)(N.gN,{children:(0,n.jsx)(N.At,{href:"/dashboard",children:"Dashboard"})}),(0,n.jsx)(N.bg,{}),(0,n.jsx)(N.gN,{children:(0,n.jsx)(N.AG,{children:"My Bookings"})})]})})}),(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("button",{onClick:()=>s.push("/dashboard"),className:"text-blue-600 hover:text-blue-800 mb-4 inline-block",children:"← Back to Dashboard"}),(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Bookings"}),(0,n.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your pet service bookings"})]}),(0,n.jsx)(E,{title:"Pending Approval",bookings:D,emptyMessage:"No bookings waiting for approval"}),(0,n.jsx)(E,{title:"Confirmed Bookings",bookings:A,emptyMessage:"No confirmed bookings"}),(0,n.jsx)(E,{title:"Completed Services",bookings:R,emptyMessage:"No completed services yet"}),(0,n.jsx)(E,{title:"Cancelled Bookings",bookings:S,emptyMessage:"No cancelled bookings"}),C.length>0&&(0,n.jsxs)("div",{className:"mt-12 bg-white rounded-lg shadow-md p-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Booking Summary"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:D.length}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"Pending"})]}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:A.length}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"Confirmed"})]}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-green-600",children:R.length}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"Completed"})]}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-red-600",children:S.length}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"Cancelled"})]})]})]}),0===C.length&&(0,n.jsxs)("div",{className:"mt-12 text-center bg-blue-50 rounded-lg p-8",children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"No bookings yet"}),(0,n.jsx)("p",{className:"text-gray-600 mb-6",children:"Start by browsing available pet services and booking with trusted providers."}),(0,n.jsx)(i.default,{href:"/services",children:(0,n.jsx)(v.z,{children:"Browse Services"})})]}),j&&(0,n.jsx)(y,{bookingId:j.id,serviceTitle:j.serviceTitle,isOpen:p,onClose:()=>{b(!1),f(null)},onSuccess:()=>{}})]})})}function w(){return(0,n.jsx)(u.i,{children:(0,n.jsx)(k,{})})}},2531:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(8322).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8149:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(8322).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},2133:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(8322).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},3955:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(8322).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},4447:function(e,s,t){"use strict";t.d(s,{$j:function(){return Z},Dx:function(){return T},VY:function(){return P},aU:function(){return L},aV:function(){return M},dk:function(){return F},fC:function(){return B},h_:function(){return O},xz:function(){return z}});var n=t(8078),r=t(2696),i=t(4227),a=t(3758),l=t(4128),c=t(7035),o=t(7821),d="AlertDialog",[u,x]=(0,r.b)(d,[a.p8]),m=(0,a.p8)(),h=e=>{let{__scopeAlertDialog:s,...t}=e,n=m(s);return(0,o.jsx)(a.fC,{...n,...t,modal:!0})};h.displayName=d;var g=n.forwardRef((e,s)=>{let{__scopeAlertDialog:t,...n}=e,r=m(t);return(0,o.jsx)(a.xz,{...r,...n,ref:s})});g.displayName="AlertDialogTrigger";var v=e=>{let{__scopeAlertDialog:s,...t}=e,n=m(s);return(0,o.jsx)(a.h_,{...n,...t})};v.displayName="AlertDialogPortal";var j=n.forwardRef((e,s)=>{let{__scopeAlertDialog:t,...n}=e,r=m(t);return(0,o.jsx)(a.aV,{...r,...n,ref:s})});j.displayName="AlertDialogOverlay";var f="AlertDialogContent",[p,b]=u(f),y=(0,c.sA)("AlertDialogContent"),N=n.forwardRef((e,s)=>{let{__scopeAlertDialog:t,children:r,...c}=e,d=m(t),u=n.useRef(null),x=(0,i.e)(s,u),h=n.useRef(null);return(0,o.jsx)(a.jm,{contentName:f,titleName:k,docsSlug:"alert-dialog",children:(0,o.jsx)(p,{scope:t,cancelRef:h,children:(0,o.jsxs)(a.VY,{role:"alertdialog",...d,...c,ref:x,onOpenAutoFocus:(0,l.Mj)(c.onOpenAutoFocus,e=>{var s;e.preventDefault(),null===(s=h.current)||void 0===s||s.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,o.jsx)(y,{children:r}),(0,o.jsx)(E,{contentRef:u})]})})})});N.displayName=f;var k="AlertDialogTitle",w=n.forwardRef((e,s)=>{let{__scopeAlertDialog:t,...n}=e,r=m(t);return(0,o.jsx)(a.Dx,{...r,...n,ref:s})});w.displayName=k;var C="AlertDialogDescription",D=n.forwardRef((e,s)=>{let{__scopeAlertDialog:t,...n}=e,r=m(t);return(0,o.jsx)(a.dk,{...r,...n,ref:s})});D.displayName=C;var A=n.forwardRef((e,s)=>{let{__scopeAlertDialog:t,...n}=e,r=m(t);return(0,o.jsx)(a.x8,{...r,...n,ref:s})});A.displayName="AlertDialogAction";var R="AlertDialogCancel",S=n.forwardRef((e,s)=>{let{__scopeAlertDialog:t,...n}=e,{cancelRef:r}=b(R,t),l=m(t),c=(0,i.e)(s,r);return(0,o.jsx)(a.x8,{...l,...n,ref:c})});S.displayName=R;var E=e=>{let{contentRef:s}=e,t="`".concat(f,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(f,"` by passing a `").concat(C,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(f,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return n.useEffect(()=>{var e;document.getElementById(null===(e=s.current)||void 0===e?void 0:e.getAttribute("aria-describedby"))||console.warn(t)},[t,s]),null},B=h,z=g,O=v,M=j,P=N,L=A,Z=S,T=w,F=D}},function(e){e.O(0,[8803,5427,9808,6074,4542,9033,4685,5367,5593,6518,5641,6651,7115,2364,1744],function(){return e(e.s=6893)}),_N_E=e.O()}]);