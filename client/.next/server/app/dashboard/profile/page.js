(()=>{var e={};e.id=544,e.ids=[544],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},78405:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>d,pages:()=>u,routeModule:()=>p,tree:()=>c}),r(40065),r(22399),r(12874);var s=r(27105),a=r(15265),i=r(90157),n=r.n(i),o=r(44665),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["dashboard",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,40065)),"C:\\Users\\User\\Desktop\\GITHUB\\PET\\client\\src\\app\\dashboard\\profile\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,22399)),"C:\\Users\\User\\Desktop\\GITHUB\\PET\\client\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,12874,23)),"next/dist/client/components/not-found-error"]}],u=["C:\\Users\\User\\Desktop\\GITHUB\\PET\\client\\src\\app\\dashboard\\profile\\page.tsx"],d="/dashboard/profile/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/profile/page",pathname:"/dashboard/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2968:(e,t,r)=>{Promise.resolve().then(r.bind(r,94653))},94653:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>R});var s=r(19899),a=r(5507),i=r(76153),n=r(65271),o=r(7346),l=r(1206),c=r(57623),u=r(67765),d=r(13114);let m={all:["profile"],profile:e=>[...m.all,"me",e]};var p=r(23847),h=r(2345),f=r(4649),x=r(63086),v=r(47334),b=r(90360),g=r(49614),j=r(83217),y=r(48026),N=r(78652);let P=(0,r(84516).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);function O(){let{user:e}=(0,n.a)(),t=(0,i.useRouter)(),{data:r,isPending:h,error:O}=(0,o.a)({queryKey:m.profile(),queryFn:u.FZ.getMyProfile,staleTime:3e5,retry:(e,t)=>t?.response?.status!==401&&t?.response?.status!==403&&e<3}),R=function(){let e=(0,l.NL)();return(0,c.D)({mutationFn:e=>u.FZ.updateMyProfile(e),onSuccess:t=>{e.setQueryData(m.profile(),t),(0,d.Am)({title:"Success",description:"Profile updated successfully"})},onError:e=>{let t=e?.response?.data?.error||"Failed to update profile";(0,d.Am)({title:"Error",description:t,variant:"destructive"})}})}(),[w,S]=(0,a.useState)({firstName:"",lastName:"",avatarUrl:"",bio:"",location:""}),[E,_]=(0,a.useState)({}),I=(e,t)=>{S(r=>({...r,[e]:t})),E[e]&&_(t=>({...t,[e]:""}))},z=()=>{let t={};return w.firstName&&w.firstName.length<1&&(t.firstName="First name must be at least 1 character"),w.lastName&&w.lastName.length<1&&(t.lastName="Last name must be at least 1 character"),w.avatarUrl&&!w.avatarUrl.match(/^https?:\/\/.+/)&&(t.avatarUrl="Avatar URL must be a valid URL"),e?.role===p.UserRole.PROVIDER&&(w.bio&&w.bio.length>500&&(t.bio="Bio must be less than 500 characters"),w.location&&w.location.length>100&&(t.location="Location must be less than 100 characters")),_(t),0===Object.keys(t).length},M=async e=>{if(e.preventDefault(),z())try{await R.mutateAsync(w)}catch(e){}},U=()=>{t.push("/dashboard")};return h?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(f.T,{size:"lg"})}):O?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx(y.bZ,{variant:"destructive",className:"max-w-md",children:(0,s.jsxs)(y.X,{children:["Failed to load profile: ",O instanceof Error?O.message:"Unknown error occurred"]})}),s.jsx(g.z,{variant:"outline",onClick:()=>t.push("/dashboard"),className:"mt-4",children:"Back to Dashboard"})]})}):s.jsx("div",{className:"min-h-screen bg-background py-8",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto px-4",children:[s.jsx("div",{className:"mb-6",children:s.jsx(N.aG,{children:(0,s.jsxs)(N.Jb,{children:[s.jsx(N.gN,{children:s.jsx(N.At,{href:"/",children:"Home"})}),s.jsx(N.bg,{}),s.jsx(N.gN,{children:s.jsx(N.At,{href:"/dashboard",children:"Dashboard"})}),s.jsx(N.bg,{}),s.jsx(N.gN,{children:s.jsx(N.AG,{children:"Profile"})})]})})}),(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx(g.z,{variant:"ghost",onClick:U,className:"mb-4 p-0 h-auto font-normal",children:"← Back to Dashboard"}),s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Edit Profile"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Update your profile information"})]}),(0,s.jsxs)(j.Zb,{children:[s.jsx(j.Ol,{children:s.jsx(j.ll,{children:"Profile Information"})}),s.jsx(j.aY,{children:(0,s.jsxs)("form",{onSubmit:M,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(v._,{htmlFor:"firstName",children:"First Name"}),s.jsx(x.I,{type:"text",id:"firstName",value:w.firstName,onChange:e=>I("firstName",e.target.value),placeholder:"Enter your first name"}),E.firstName&&s.jsx("p",{className:"text-destructive text-sm",children:E.firstName})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(v._,{htmlFor:"lastName",children:"Last Name"}),s.jsx(x.I,{type:"text",id:"lastName",value:w.lastName,onChange:e=>I("lastName",e.target.value),placeholder:"Enter your last name"}),E.lastName&&s.jsx("p",{className:"text-destructive text-sm",children:E.lastName})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(v._,{htmlFor:"avatarUrl",children:"Avatar URL"}),s.jsx(x.I,{type:"url",id:"avatarUrl",value:w.avatarUrl,onChange:e=>I("avatarUrl",e.target.value),placeholder:"https://example.com/avatar.jpg"}),E.avatarUrl&&s.jsx("p",{className:"text-destructive text-sm",children:E.avatarUrl}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Enter a URL for your profile picture"})]}),e?.role===p.UserRole.PROVIDER&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(v._,{htmlFor:"bio",children:"Bio"}),s.jsx(b.g,{id:"bio",value:w.bio,onChange:e=>I("bio",e.target.value),placeholder:"Tell potential clients about yourself and your experience...",rows:4}),E.bio&&s.jsx("p",{className:"text-destructive text-sm",children:E.bio}),(0,s.jsxs)("p",{className:"text-muted-foreground text-sm",children:[w.bio?.length||0,"/500 characters"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(v._,{htmlFor:"location",children:"Location"}),s.jsx(x.I,{type:"text",id:"location",value:w.location,onChange:e=>I("location",e.target.value),placeholder:"City, State/Country"}),E.location&&s.jsx("p",{className:"text-destructive text-sm",children:E.location}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Where are you located?"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[s.jsx(g.z,{type:"button",variant:"outline",onClick:U,disabled:R.isPending,children:"Cancel"}),(0,s.jsxs)(g.z,{type:"submit",variant:"default",disabled:R.isPending,children:[s.jsx(P,{className:"mr-2 h-4 w-4"}),R.isPending?"Saving...":"Save Changes"]})]})]})})]})]})})}function R(){return s.jsx(h.i,{children:s.jsx(O,{})})}},4649:(e,t,r)=>{"use strict";r.d(t,{T:()=>a});var s=r(19899);function a({size:e="md",className:t=""}){return s.jsx("div",{className:`flex justify-center items-center ${t}`,children:s.jsx("div",{className:`${{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[e]} border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin`})})}r(5507)},2345:(e,t,r)=>{"use strict";r.d(t,{i:()=>i});var s=r(19899);r(5507);var a=r(65271);function i({children:e}){let{isAuthenticated:t,isLoading:r}=(0,a.a)();return(console.log("[ProtectedRoute DEBUG] Render - isAuthenticated:",t,"isLoading:",r),r)?(console.log("[ProtectedRoute DEBUG] Still loading, showing loading spinner"),s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading..."})]})})):t?(console.log("[ProtectedRoute DEBUG] Rendering protected content"),s.jsx(s.Fragment,{children:e})):(console.log("[ProtectedRoute DEBUG] Not authenticated, returning null"),null)}},48026:(e,t,r)=>{"use strict";r.d(t,{X:()=>c,bZ:()=>l});var s=r(19899),a=r(5507),i=r(51138),n=r(13096);let o=(0,i.j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=a.forwardRef(({className:e,variant:t,...r},a)=>s.jsx("div",{ref:a,role:"alert",className:(0,n.cn)(o({variant:t}),e),...r}));l.displayName="Alert",a.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",e),...t}));c.displayName="AlertDescription"},78652:(e,t,r)=>{"use strict";r.d(t,{AG:()=>p,At:()=>m,Jb:()=>u,aG:()=>c,bg:()=>h,gN:()=>d});var s=r(19899),a=r(5507),i=r(52681),n=r(51138),o=r(13096);let l=(0,n.j)("flex items-center gap-1.5",{variants:{variant:{default:"",ghost:"text-muted-foreground hover:text-foreground"}},defaultVariants:{variant:"default"}}),c=a.forwardRef(({className:e,variant:t,separator:r=i.Z,...a},n)=>s.jsx("nav",{ref:n,"aria-label":"breadcrumb",className:(0,o.cn)(l({variant:t}),e),...a}));c.displayName="Breadcrumb";let u=a.forwardRef(({className:e,...t},r)=>s.jsx("ol",{ref:r,className:(0,o.cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",e),...t}));u.displayName="BreadcrumbList";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("li",{ref:r,className:(0,o.cn)("inline-flex items-center gap-1.5",e),...t}));d.displayName="BreadcrumbItem";let m=a.forwardRef(({className:e,...t},r)=>s.jsx("a",{ref:r,className:(0,o.cn)("transition-colors hover:text-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));m.displayName="BreadcrumbLink";let p=a.forwardRef(({className:e,...t},r)=>s.jsx("span",{ref:r,role:"link","aria-disabled":"true","aria-current":"page",className:(0,o.cn)("font-normal text-foreground",e),...t}));p.displayName="BreadcrumbPage";let h=({children:e,className:t,...r})=>s.jsx("li",{role:"presentation","aria-hidden":"true",className:(0,o.cn)("[&>svg]:h-3.5 [&>svg]:w-3.5",t),...r,children:e??s.jsx(i.Z,{})});h.displayName="BreadcrumbSeparator"},63086:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});var s=r(19899),a=r(5507),i=r(13096);let n=a.forwardRef(({className:e,type:t,...r},a)=>s.jsx("input",{type:t,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...r}));n.displayName="Input"},47334:(e,t,r)=>{"use strict";r.d(t,{_:()=>c});var s=r(19899),a=r(5507),i=r(10883),n=r(51138),o=r(13096);let l=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...t},r)=>s.jsx(i.f,{ref:r,className:(0,o.cn)(l(),e),...t}));c.displayName=i.f.displayName},90360:(e,t,r)=>{"use strict";r.d(t,{g:()=>n});var s=r(19899),a=r(5507),i=r(13096);let n=a.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:(0,i.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));n.displayName="Textarea"},52681:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(84516).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},76153:(e,t,r)=>{"use strict";var s=r(81545);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},92640:(e,t,r)=>{"use strict";var s=Object.create?function(e,t,r,s){void 0===s&&(s=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,a)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]};Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)}(r(81285),t)},81285:(e,t)=>{"use strict";var r,s,a,i;Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentStatus=t.BookingStatus=t.ServiceType=t.UserRole=void 0,function(e){e.OWNER="OWNER",e.PROVIDER="PROVIDER"}(r||(t.UserRole=r={})),function(e){e.WALKING="WALKING",e.SITTING="SITTING",e.GROOMING="GROOMING",e.VETERINARIAN_VISIT="VETERINARIAN_VISIT",e.TAXI="TAXI",e.TRAINING="TRAINING"}(s||(t.ServiceType=s={})),function(e){e.PENDING="PENDING",e.CONFIRMED="CONFIRMED",e.CANCELLED="CANCELLED",e.COMPLETED="COMPLETED"}(a||(t.BookingStatus=a={})),function(e){e.PENDING="PENDING",e.PAID="PAID",e.FAILED="FAILED"}(i||(t.PaymentStatus=i={}))},23847:(e,t,r)=>{"use strict";var s=Object.create?function(e,t,r,s){void 0===s&&(s=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,a)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]},a=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(92640),t),a(r(90858),t),a(r(14188),t)},14188:(e,t,r)=>{"use strict";var s=Object.create?function(e,t,r,s){void 0===s&&(s=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,a)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]};Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)}(r(44417),t)},44417:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateBookingStatusSchema=t.createBookingSchema=t.updateServiceSchema=t.createServiceSchema=t.updateProfileSchema=t.createProfileSchema=t.loginSchema=t.createUserSchema=void 0;let s=r(27490),a=r(92640);t.createUserSchema=s.z.object({email:s.z.string().email("Invalid email format"),password:s.z.string().min(8,"Password must be at least 8 characters"),role:s.z.nativeEnum(a.UserRole)}),t.loginSchema=s.z.object({email:s.z.string().email("Invalid email format"),password:s.z.string().min(1,"Password is required")}),t.createProfileSchema=s.z.object({userId:s.z.string().uuid(),firstName:s.z.string().min(1).max(50).optional(),lastName:s.z.string().min(1).max(50).optional(),avatarUrl:s.z.string().url().optional(),bio:s.z.string().max(500).optional(),location:s.z.string().max(100).optional()}),t.updateProfileSchema=s.z.object({firstName:s.z.string().min(1).max(50).optional(),lastName:s.z.string().min(1).max(50).optional(),avatarUrl:s.z.string().url().optional(),bio:s.z.string().max(500).optional(),location:s.z.string().max(100).optional()}),t.createServiceSchema=s.z.object({serviceType:s.z.nativeEnum(a.ServiceType),title:s.z.string().min(5).max(100),description:s.z.string().min(10).max(1e3),price:s.z.number().positive(),availability:s.z.record(s.z.array(s.z.string().regex(/^([01]\d|2[0-3]):([0-5]\d)-([01]\d|2[0-3]):([0-5]\d)$/)))}),t.updateServiceSchema=s.z.object({serviceType:s.z.nativeEnum(a.ServiceType).optional(),title:s.z.string().min(5).max(100).optional(),description:s.z.string().min(10).max(1e3).optional(),price:s.z.number().positive().optional(),availability:s.z.record(s.z.array(s.z.string().regex(/^([01]\d|2[0-3]):([0-5]\d)-([01]\d|2[0-3]):([0-5]\d)$/))).optional()}),t.createBookingSchema=s.z.object({bookingTime:s.z.string().datetime(),notes:s.z.string().max(500).optional()}),t.updateBookingStatusSchema=s.z.object({status:s.z.nativeEnum(a.BookingStatus)})},49883:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},71899:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},90858:(e,t,r)=>{"use strict";var s=Object.create?function(e,t,r,s){void 0===s&&(s=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,a)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]},a=function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),a(r(29727),t),a(r(49883),t),a(r(66722),t),a(r(71899),t),a(r(19686),t)},19686:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},66722:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},29727:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},40065:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(2772).createProxy)(String.raw`C:\Users\User\Desktop\GITHUB\PET\client\src\app\dashboard\profile\page.tsx#default`)},10883:(e,t,r)=>{"use strict";r.d(t,{f:()=>o});var s=r(5507),a=r(17738),i=r(19899),n=s.forwardRef((e,t)=>(0,i.jsx)(a.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var o=n},57623:(e,t,r)=>{"use strict";r.d(t,{D:()=>u});var s=r(5507),a=r(41922),i=r(16641),n=r(99028),o=r(67973),l=class extends n.l{#e;#t=void 0;#r;#s;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,o.VS)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(t.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#a(),this.#i()}mutate(e,t){return this.#s=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#a(){let e=this.#r?.state??(0,a.R)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){i.Vr.batch(()=>{if(this.#s&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#s.onSuccess?.(e.data,t,r,s),this.#s.onSettled?.(e.data,null,t,r,s)):e?.type==="error"&&(this.#s.onError?.(e.error,t,r,s),this.#s.onSettled?.(void 0,e.error,t,r,s))}this.listeners.forEach(e=>{e(this.#t)})})}},c=r(1206);function u(e,t){let r=(0,c.NL)(t),[a]=s.useState(()=>new l(r,e));s.useEffect(()=>{a.setOptions(e)},[a,e]);let n=s.useSyncExternalStore(s.useCallback(e=>a.subscribe(i.Vr.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),u=s.useCallback((e,t)=>{a.mutate(e,t).catch(o.ZT)},[a]);if(n.error&&(0,o.L3)(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:u,mutateAsync:n.mutate}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[489,490,695],()=>r(78405));module.exports=s})();